{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useApp}from'../../context/AppContext';import{getFeaturedProducts}from'../../services/productService';import Loading from'../Loading/Loading';import'./Products.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Products(){const navigate=useNavigate();const{addToCart,showToast}=useApp();const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadFeaturedProducts();},[]);const loadFeaturedProducts=async()=>{const{data,error}=await getFeaturedProducts(4);if(error){console.error('Error loading products:',error);// Usar productos de respaldo\nsetProducts([{id:'poncho-tradicional',name:'Poncho Andino Tradicional',category:'Ponchos',price:149,originalPrice:189,badge:'Nuevo',badgeColor:'var(--secondary)',icon:'fas fa-tshirt'},{id:'pollera-cusqueña',name:'Pollera Cusqueña Bordada',category:'Polleras',price:125,badge:'Popular',badgeColor:'var(--accent)',icon:'fas fa-female'},{id:'chaleco-alpaca',name:'Chaleco de Alpaca Premium',category:'Chalecos',price:199,icon:'fas fa-vest'},{id:'chal-tejido',name:'Chal Tejido a Mano',category:'Chales',price:65,originalPrice:85,badge:'Oferta',badgeColor:'var(--secondary)',icon:'fas fa-scarf'}]);}else if(data&&data.length>0){// Mapear datos de Supabase al formato del componente\nconst mappedProducts=data.map(product=>({id:product.id,name:product.name,category:product.category,price:parseFloat(product.price),originalPrice:product.original_price?parseFloat(product.original_price):null,badge:product.badge,badgeColor:product.badge_color,icon:getCategoryIcon(product.category)}));setProducts(mappedProducts);}else{// No hay productos, usar array vacío o productos de respaldo\nsetProducts([]);}setLoading(false);};// Helper para obtener el ícono según categoría\nconst getCategoryIcon=category=>{const icons={'Ponchos':'fas fa-tshirt','Polleras':'fas fa-female','Chalecos':'fas fa-vest','Chales':'fas fa-scarf'};return icons[category]||'fas fa-tshirt';};const handleAddToCart=product=>{addToCart({id:product.id,name:product.name,price:product.price});showToast(\"\".concat(product.name,\" agregado al carrito por S/. \").concat(product.price),'success');};const handleQuickView=product=>{navigate(\"/producto/\".concat(product.id));};return/*#__PURE__*/_jsx(\"section\",{className:\"products\",id:\"tienda\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Productos Destacados\"}),loading?/*#__PURE__*/_jsx(Loading,{text:\"Cargando productos destacados...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"product-grid\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-image\",children:[product.badge&&/*#__PURE__*/_jsx(\"div\",{className:\"product-badge\",style:{background:product.badgeColor},children:product.badge}),/*#__PURE__*/_jsx(\"i\",{className:product.icon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"product-category\",children:product.category}),/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"price-current\",children:[\"S/. \",product.price]}),product.originalPrice&&/*#__PURE__*/_jsxs(\"span\",{className:\"price-original\",children:[\"S/. \",product.originalPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",onClick:()=>handleQuickView(product),children:\"Vista R\\xE1pida\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>handleAddToCart(product),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-cart-plus\"}),\" Agregar\"]})]})]})]},product.id))})]})});}export default Products;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useApp","getFeaturedProducts","Loading","jsx","_jsx","jsxs","_jsxs","Products","navigate","addToCart","showToast","products","setProducts","loading","setLoading","loadFeaturedProducts","data","error","console","id","name","category","price","originalPrice","badge","badgeColor","icon","length","mappedProducts","map","product","parseFloat","original_price","badge_color","getCategoryIcon","icons","handleAddToCart","concat","handleQuickView","className","children","text","style","background","onClick"],"sources":["C:/Users/Usuario/OneDrive/Desktop/proyecto/chinasaqra-demo/src/components/Products/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../../context/AppContext';\nimport { getFeaturedProducts } from '../../services/productService';\nimport Loading from '../Loading/Loading';\nimport './Products.css';\n\nfunction Products() {\n  const navigate = useNavigate();\n  const { addToCart, showToast } = useApp();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadFeaturedProducts();\n  }, []);\n\n  const loadFeaturedProducts = async () => {\n    const { data, error } = await getFeaturedProducts(4);\n\n    if (error) {\n      console.error('Error loading products:', error);\n      // Usar productos de respaldo\n      setProducts([\n        {\n          id: 'poncho-tradicional',\n          name: 'Poncho Andino Tradicional',\n          category: 'Ponchos',\n          price: 149,\n          originalPrice: 189,\n          badge: 'Nuevo',\n          badgeColor: 'var(--secondary)',\n          icon: 'fas fa-tshirt'\n        },\n        {\n          id: 'pollera-cusqueña',\n          name: 'Pollera Cusqueña Bordada',\n          category: 'Polleras',\n          price: 125,\n          badge: 'Popular',\n          badgeColor: 'var(--accent)',\n          icon: 'fas fa-female'\n        },\n        {\n          id: 'chaleco-alpaca',\n          name: 'Chaleco de Alpaca Premium',\n          category: 'Chalecos',\n          price: 199,\n          icon: 'fas fa-vest'\n        },\n        {\n          id: 'chal-tejido',\n          name: 'Chal Tejido a Mano',\n          category: 'Chales',\n          price: 65,\n          originalPrice: 85,\n          badge: 'Oferta',\n          badgeColor: 'var(--secondary)',\n          icon: 'fas fa-scarf'\n        }\n      ]);\n    } else if (data && data.length > 0) {\n      // Mapear datos de Supabase al formato del componente\n      const mappedProducts = data.map(product => ({\n        id: product.id,\n        name: product.name,\n        category: product.category,\n        price: parseFloat(product.price),\n        originalPrice: product.original_price ? parseFloat(product.original_price) : null,\n        badge: product.badge,\n        badgeColor: product.badge_color,\n        icon: getCategoryIcon(product.category)\n      }));\n      setProducts(mappedProducts);\n    } else {\n      // No hay productos, usar array vacío o productos de respaldo\n      setProducts([]);\n    }\n\n    setLoading(false);\n  };\n\n  // Helper para obtener el ícono según categoría\n  const getCategoryIcon = (category) => {\n    const icons = {\n      'Ponchos': 'fas fa-tshirt',\n      'Polleras': 'fas fa-female',\n      'Chalecos': 'fas fa-vest',\n      'Chales': 'fas fa-scarf'\n    };\n    return icons[category] || 'fas fa-tshirt';\n  };\n\n  const handleAddToCart = (product) => {\n    addToCart({\n      id: product.id,\n      name: product.name,\n      price: product.price\n    });\n    showToast(`${product.name} agregado al carrito por S/. ${product.price}`, 'success');\n  };\n\n  const handleQuickView = (product) => {\n    navigate(`/producto/${product.id}`);\n  };\n\n  return (\n    <section className=\"products\" id=\"tienda\">\n      <div className=\"container\">\n        <h2 className=\"section-title\">Productos Destacados</h2>\n        {loading ? (\n          <Loading text=\"Cargando productos destacados...\" />\n        ) : (\n          <div className=\"product-grid\">\n          {products.map((product) => (\n            <div key={product.id} className=\"product-card\">\n              <div className=\"product-image\">\n                {product.badge && (\n                  <div \n                    className=\"product-badge\" \n                    style={{ background: product.badgeColor }}\n                  >\n                    {product.badge}\n                  </div>\n                )}\n                <i className={product.icon}></i>\n              </div>\n              <div className=\"product-info\">\n                <p className=\"product-category\">{product.category}</p>\n                <h3 className=\"product-name\">{product.name}</h3>\n                <div className=\"product-price\">\n                  <span className=\"price-current\">S/. {product.price}</span>\n                  {product.originalPrice && (\n                    <span className=\"price-original\">S/. {product.originalPrice}</span>\n                  )}\n                </div>\n                <div className=\"product-actions\">\n                  <button \n                    className=\"btn btn-outline btn-sm\"\n                    onClick={() => handleQuickView(product)}\n                  >\n                    Vista Rápida\n                  </button>\n                  <button \n                    className=\"btn btn-primary btn-sm\" \n                    onClick={() => handleAddToCart(product)}\n                  >\n                    <i className=\"fas fa-cart-plus\"></i> Agregar\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}